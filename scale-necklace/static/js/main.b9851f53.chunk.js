(this["webpackJsonpscale-necklace"]=this["webpackJsonpscale-necklace"]||[]).push([[0],{26:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(6),r=n.n(c),l=n(20),o=n.n(l),i=(n(26),n(7)),s=n(0),u=n(2),f=n(3),d=n(11),h=[{sharp:"c",flat:"c"},{sharp:"c#",flat:"db"},{sharp:"d",flat:"d"},{sharp:"d#",flat:"eb"},{sharp:"e",flat:"e"},{sharp:"f",flat:"f"},{sharp:"f#",flat:"gb"},{sharp:"g",flat:"g"},{sharp:"g#",flat:"ab"},{sharp:"a",flat:"a"},{sharp:"a#",flat:"bb"},{sharp:"b",flat:"b"}],b=h.length,j="#fca311",p="#e5e5e5",v="#ff4136",m="low-light-color medium-font auto-margin";function O(e){return Math.floor(Math.random()*e)}function g(e){return e[O(e.length)]}function x(e,t){var n=y(t,e.length);return e.slice(n).concat(e.slice(0,n))}function y(e,t){return(e%t+t)%t}function N(e){return e.reduce((function(e,t){return t+e}),0)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.reduce((function(e,t){return e.concat(e[e.length-1]+t)}),[t])}var S=function(e,t,n){var a,c=e.filter(V),r=e.filter((function(e){return!V(e)}));if((100*Math.random()<t||0===r.length)&&c.length>0)0===t&&alert("No adjacent scale without augmented seconds."),a=c;else{if(!(r.length>0))return null;a=r}var l=a.filter(R),o=a.filter((function(e){return!R(e)}));return(100*Math.random()<n||0===o.length)&&l.length>0?(0===n&&alert("No adjacent scale without double half steps."),g(l)):o.length>0?g(o):null};function k(e){return 100*q.filter(e).length/q.length}function C(e,t){var n=r.a.useRef(null);if(null==n.current)return n.current=e,e;var a=Math.round((n.current-e)/t)*t+e;return n.current=a,a}var P=n(18),T=n.n(P);function E(e){return e<=1?[]:Object(d.flatten)([L(e-1).map((function(e){return{head:[1],tail:e}})),L(e-2).map((function(e){return{head:[1,1],tail:e}}))]).map((function(e){return{tag:"A",scale:e}}))}function L(e){return e<=0?[]:Object(d.flatten)([E(e-3).map((function(e){return{head:[3],tail:e}})),M(e-2).map((function(e){return{head:[2],tail:e}})),M(e-5).map((function(e){return{head:[2,3],tail:e}}))]).map((function(e){return{tag:"B",scale:e}}))}function M(e){return e<0?[]:0===e?[{tag:"C",scale:null}]:Object(d.flatten)([E(e),L(e)]).map((function(e){return{tag:"C",scale:e}}))}function z(e){var t=e.scale.head;return null===e.scale.tail?t:t.concat(A(e.scale.tail))}function A(e){var t=e.scale.head;switch(e.scale.tail.tag){case"A":return t.concat(z(e.scale.tail));case"C":return t.concat(I(e.scale.tail))}}function I(e){if(null===e.scale)return[];switch(e.scale.tag){case"A":return z(e.scale);case"B":return A(e.scale)}}function R(e){return Object(d.zip)(e,x(e,1)).some((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return 1===n&&1===a}))}function V(e){return e.some((function(e){return 3===e}))}function B(e,t){return Object(d.zip)(e,t).every((function(e){var t=Object(u.a)(e,2);return t[0]===t[1]}))}function D(e,t,n,a){if(0===e.length||0===t.length)return!1;var c=Object(i.a)(e),r=c[0],l=c.slice(1),o=Object(i.a)(t),s=o[0],u=o.slice(1);if(T()(r===n[n.length-1]),T()(s===a[a.length-1]),r===s){var f,d=Object(i.a)(n),h=d[0],b=d[1],j=d.slice(2),p=Object(i.a)(a),v=p[0],m=p[1],O=p.slice(2);if(h!==b&&h+b===v+m&&(f=B(j,O)),h+b===v&&(f=B(j,[m].concat(O))),v+m===h&&(f=B(O,[b].concat(j))),f)return!0}return D(l,u,x(n,1),x(a,1))}function F(e,t){return D(e,t,x(e,1),x(t,1))}var q=Object(d.flatten)(M(b).map(I).map((function(e){return e.map((function(t,n){return x(e,n)}))})));function J(e){var t=Object(i.a)(e),n=t[0],a=t[1],c=t.slice(2);return void 0!==n&&(1===n&&1===a?$(c):1===n&&$([a].concat(Object(f.a)(c))))}function $(e){var t=Object(i.a)(e),n=t[0],a=t[1],c=t.slice(2);return 2===n&&3===a?G(c):2===n?G([a].concat(Object(f.a)(c))):3===n&&J([a].concat(Object(f.a)(c)))}function G(e){return void 0===Object(u.a)(e,1)[0]||(J(e)||$(e))}var H=n(19),K=(n(45),n(5)),Q=function(e){var t=e.value,n=e.setValue;return Object(a.jsx)("label",{className:"relative",children:Object(a.jsx)("input",{type:"range",className:"width-100 translate-minus-50 slide absolute",min:0,max:100,step:10,value:t,onChange:function(e){var t=e.target;n(+t.value)}})})},U=function(e){var t=e.value,n=e.setValue;return Object(a.jsxs)("label",{className:"relative",children:[Object(a.jsx)("input",{className:"invisible",type:"checkbox",onChange:function(){return n(!t)},checked:!t}),Object(a.jsx)("span",{className:"slide switch absolute center"})]})},W=function(e){var t=e.onSubmit,n=r.a.useState(null),c=Object(u.a)(n,2),l=c[0],o=c[1],s=h.flatMap((function(e){return[e.sharp,e.flat]})),f=new Set(s),d=null,b=null,j=null;if(null!==l){b=function(e){var t,n=e.split(" "),a=Object(K.a)(n);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(!f.has(c))return null}}catch(d){a.e(d)}finally{a.f()}var r=n.map((function(e){return Math.floor(s.indexOf(e)/2)})),l=Object(i.a)(r),o=l[0],u=l.slice(1);return(u=u.concat([o+h.length])).reduce((function(e,t){var n=o+N(e);return e.concat([t-n])}),[])}(l);var p,v=l.split(" ").filter((function(e){return""!==e})),O=Object(K.a)(v);try{for(O.s();!(p=O.n()).done;){var g=p.value;f.has(g)||(d="".concat(g," is not a valid note name."))}}catch(k){O.e(k)}finally{O.f()}if(null===d){var x=v.map((function(e){return Math.floor(s.indexOf(e)/2)})),y=Object(i.a)(x),w=y[0],S=y.slice(1);b=(S=S.concat([w+h.length])).reduce((function(e,t){var n=w+N(e);return e.concat([t-n])}),[]),j={steps:b,root:w,rootStep:0}}}return Object(a.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),null!==j){if(!G(j.steps)){var n=j.steps.slice(0,j.steps.length-1);alert("".concat(n," is not a valid sequence of steps."))}t(j)}},className:"auto-margin flex-row width-400",children:[Object(a.jsxs)("label",{className:"".concat(m," flex-row width-300"),children:[null===d?"Input scale":d,Object(a.jsx)("input",{className:"margin-left-20 no-outline",type:"text",value:null===l?"":l,onChange:function(e){return o(e.target.value)}})]}),Object(a.jsx)("input",{className:"button no-border curved-radius medium-text",type:"submit",value:"Submit",disabled:null===l||null!==d})]})};function X(){var e=r.a.useState([{root:0,rootStep:0,steps:q[0]}]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=r.a.useState(0),o=Object(u.a)(l,2),f=o[0],d=o[1],b=n[f],g=b.root;function N(e){d(n.length),c(n.concat(e))}var P=r.a.useState(!0),T=Object(u.a)(P,2),E=T[0],L=T[1],M=r.a.useState(k(R)),z=Object(u.a)(M,2),A=z[0],I=z[1],B=r.a.useState(k(V)),D=Object(u.a)(B,2),J=D[0],$=D[1],G=r.a.useMemo((function(){return new H.a}),[]),K=r.a.useReducer((function(e,t){if(e.loaded){if("play"===t.type)return Object(s.a)(Object(s.a)({},e),{},{notesToPlay:t.notes});if("nextNote"===t.type){var n=Object(i.a)(e.notesToPlay).slice(1);return Object(s.a)(Object(s.a)({},e),{},{notesToPlay:n})}if("reset"===t.type)return Object(s.a)(Object(s.a)({},e),{},{notesToPlay:[]});throw new Error("Invalid action.type")}return{loaded:!0,notesToPlay:[]}}),{loaded:!1}),X=Object(u.a)(K,2),Y=X[0],Z=X[1],_=Y.loaded&&Y.notesToPlay.length>0;r.a.useEffect((function(){if(Y.loaded){if(_){var e,t=Object(u.a)(Y.notesToPlay,1)[0],n=h[t%h.length];return G.triggerAttack("".concat(n.sharp).concat(t<h.length?3:4)),e=setInterval((function(){Z({type:"nextNote"})}),500),function(){G.triggerRelease(),e&&clearInterval(e)}}}else G.toDestination(),Z({type:"reset"})}),[Y,G,_]),r.a.useEffect((function(){var e=function(e){var t=e.key;"Shift"===t&&L(!1),"m"===t&&L((function(e){return!e}))},t=function(e){"Shift"===e.key&&L(!0)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[L]);var ee=function(e){Y.loaded&&(_?Z({type:"reset"}):Object(H.b)().then((function(){return Z({type:"play",notes:e})})))},te=function(e){var t=e.sharp,n=e.flat,a=t.replace(/(\w)#/,"$1\u266f"),c=n.replace(/(\w)b/,"$1\u266d");return a===c?a:"".concat(a," / ").concat(c)},ne=h.map(te),ae="button large-font no-border curved-radius auto-margin",ce=function(e){return e.map((function(e){return y(e,h.length)}))},re=w(x(b.steps,b.rootStep),b.root),le=ce(re),oe=ce(w(b.steps)),ie=0===b.rootStep?0:b.steps.slice(0,b.rootStep).reduce((function(e,t){return e+t})),se=function(e,t){return Y.loaded&&Y.notesToPlay.length>0&&y(Y.notesToPlay[0],h.length)===e?v:t.includes(e)?j:p},ue=C(-ie/h.length,1),fe=C(-g/h.length,1);return Object(a.jsxs)("div",{className:"flex-column full-height",style:{"--m":h.length,"--fg":p,"--hl":j,"--ll":"#999999","--pl":v},children:[Object(a.jsx)("header",{id:"masthead",className:"site-header",role:"banner",children:Object(a.jsxs)("hgroup",{children:[Object(a.jsx)("h1",{className:"site-title",children:Object(a.jsx)("a",{href:"/",title:"Violin Lessons Lancaster PA   .  Decades of Teaching Experience",rel:"home",children:"Violin Lessons Lancaster PA . Decades of Teaching Experience"})}),Object(a.jsx)("h2",{className:"site-description",children:"Christopher Brooks, 717.291.9123, kenorjazz@gmail.com"})]})}),Object(a.jsx)("div",{id:"noteSequence","aria-live":"assertive",className:"absolute z-1000 invisible",tabIndex:0,children:le.map((function(e){return ne[e]})).join(",")}),Object(a.jsxs)("div",{className:"absolute",children:[Object(a.jsx)("button",{className:ae,onClick:function(){return d(f-1)},disabled:0===f,children:"\u21e6"}),Object(a.jsx)("button",{className:ae,onClick:function(){return d(f+1)},disabled:f===n.length-1,children:"\u21e8"})]}),Object(a.jsxs)("div",{className:"relative width-100-percent flex-column justify-content-center full-height",children:[Object(a.jsxs)("div",{className:"inside-necklace-height flex-column space-evenly center-text",children:[Object(a.jsx)("button",{className:ae,onClick:function(){var e=O(h.length);N(Object(s.a)(Object(s.a)({},b),{},{root:e})),ee([])},children:"Randomize Root"}),Object(a.jsx)("button",{className:ae,onClick:function(){var e=S(q,J,A);null===e?alert("No valid scale."):N(Object(s.a)(Object(s.a)({},b),{},{rootStep:0,steps:e}))},children:"Randomize Scale"}),Object(a.jsx)("button",{className:ae,onClick:function(){var e=function(e){return q.filter((function(t){return F(e,t)}))}(b.steps),t=S(e,J,A);null===t?alert("No adjacent scale possible."):N(Object(s.a)(Object(s.a)({},b),{},{steps:t}))},children:"Random Adjacent Scale"}),Object(a.jsx)("button",{className:ae,onClick:function(){return ee(re)},"aria-pressed":_,children:_?"Pause":"Play"}),Object(a.jsx)(W,{onSubmit:N}),Object(a.jsx)(U,{value:E,setValue:L}),Object(a.jsx)("span",{className:m,children:"Probability of consecutive half-steps"}),Object(a.jsx)(Q,{value:A,setValue:I}),Object(a.jsx)("span",{className:m,children:"Probability of augmented 2nd"}),Object(a.jsx)(Q,{value:J,setValue:$})]}),h.map((function(e,t){var n=["droplet","center","offset-angle","button","border-color"];E&&(n=n.concat(n,["no-pointer-events"]));var c=ue+t/h.length;return Object(a.jsx)("button",{"aria-controls":"noteSequence",className:n.join(" "),"aria-label":x(ne,ie)[t],style:{"--color":se(t,oe),"--turn":c},onClick:function(){!E&&oe.includes(t)&&N(Object(s.a)(Object(s.a)({},b),{},{rootStep:oe.indexOf(t)}))}},t)})),h.map((function(e,t){var n=["droplet","offset-angle","color","medium-font","center","invert-on-hover"];E||(n=n.concat(n,["no-pointer-events"]));var c=fe+t/h.length;return Object(a.jsx)("div",{className:n.join(" "),style:{"--turn":c,"--color":se(t,le)},id:"note".concat(t),onClick:function(){return N(Object(s.a)(Object(s.a)({},b),{},{root:t}))},children:Object(a.jsx)("div",{style:{"--turn":c},className:"reverse-rotate",children:te(e)})},t)}))]})]})}var Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),a(e),c(e),r(e),l(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(X,{})}),document.getElementById("root")),Y()}},[[46,1,2]]]);
//# sourceMappingURL=main.b9851f53.chunk.js.map